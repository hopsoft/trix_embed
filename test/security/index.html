<!DOCTYPE html>
<html lang="en">
<head>
  <title>Security</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/trix@2.0.0/dist/trix.css">
  <script type="module">
  import 'https://unpkg.com/trix@2.0.4/dist/trix.umd.min.js'
  import { Application } from 'https://unpkg.com/@hotwired/stimulus@3.2.1/dist/stimulus.js'
  import TrixEmbed from '../../dist/trix-embed.js'

  const application = Application.start()
  TrixEmbed.initialize({ application })
  </script>
</head>
<body>
  <div class="container mb-5">
    <h1 class="my-4">Security Demo</h1>

    <p class="lead">
      Trix Embed ships with a few security features to help prevent malicious and unwanted content from being embedded.
    </p>

    <div class="alert alert-primary" role="alert">
      All security relatated attributes are removed from the DOM when the controller connects.
    </div>

    <h2>Allow List</h2>
    <p>
      Allow lists let you specify which hosts and domains can be embedded.
      The lists are encrypted and hidden making it difficult for attackers to tamper with them.
    </p>
    <p>
      To create an allow list, open the browser's JavaScript console <kbd>⌘ ⌥ J</kbd> or <kbd>⌘ ⌥ C</kbd>.
      Then run the command below. <em>Be sure to replace the list with your own.</em>
    </p>

<pre class="my-4 p-4 bg-light text-primary"><code>TrixEmbed.generateKeyAndEncryptValues(['example.com', 'test.com'])
</code></pre>

    <p>
      Next, copy the output into the corresponding attributes on your <code>&lt;trix-editor&gt;</code>.
    </p>

<pre class="my-4 p-4 bg-light text-primary"><code>data-trix-embed-key-value="KEY"
data-trix-embed-list-value="HOSTS"
</code></pre>

    <h2>Paranoid Option</h2>
    <p>
      The <code>paranoid</code> options protects your forms from being tampered with.
      <a href="../attacks">Read more</a> about the attack vectors this protects against.
    </p>

<pre class="my-4 p-4 bg-light text-primary"><code>data-trix-embed-paranoid-value="true"
</code></pre>

  </div>
</body>
</html>
