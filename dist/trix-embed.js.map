{
  "version": 3,
  "sources": ["../src/urls.js", "../src/media.js", "../src/renderer.js", "../src/controller.js", "../src/index.js"],
  "sourcesContent": ["function createURL(value, callback) {\n  try {\n    callback(new URL(String(value).trim()))\n  } catch (error) {\n    console.error(`Error parsing URL!`, value, error)\n  }\n}\n\nfunction createURLHost(value, callback) {\n  createURL(value, url => callback(url.host))\n}\n\nfunction extractURLsFromTextNodes(element) {\n  const urls = []\n  const walker = document.createTreeWalker(element, NodeFilter.SHOW_TEXT, node => {\n    const value = node.nodeValue\n    if (!value.includes('http')) return NodeFilter.FILTER_REJECT\n    return NodeFilter.FILTER_ACCEPT\n  })\n\n  let node\n  while ((node = walker.nextNode()))\n    node.nodeValue\n      .split(/\\s+/)\n      .filter(val => val.startsWith('http'))\n      .forEach(match =>\n        createURL(match, url => {\n          if (!urls.includes(url.href)) urls.push(url.href)\n        })\n      )\n\n  return urls\n}\n\nfunction extractURLsFromElements(element) {\n  const urls = []\n\n  if (element.src) createURL(element.src, url => urls.push(url.href))\n  if (element.href)\n    createURL(element.href, url => {\n      if (!urls.includes(url.href)) urls.push(url.href)\n    })\n\n  const elements = element.querySelectorAll('[src], [href]')\n  elements.forEach(el => {\n    createURL(el.src || el.href, url => {\n      if (!urls.includes(url.href)) urls.push(url.href)\n    })\n  })\n\n  return urls\n}\n\nexport function validateURL(value, allowedHosts = []) {\n  let valid = false\n  createURLHost(value, host => (valid = !!allowedHosts.find(allowedHost => host.includes(allowedHost))))\n  return valid\n}\n\nexport function extractURLHosts(values) {\n  return values.reduce((hosts, value) => {\n    createURLHost(value, host => {\n      if (!hosts.includes(host)) hosts.push(host)\n    })\n    return hosts\n  }, [])\n}\n\nexport function extractURLs(element) {\n  const elementURLs = extractURLsFromElements(element)\n  const textNodeURLs = extractURLsFromTextNodes(element)\n  const uniqueURLs = new Set([...elementURLs, ...textNodeURLs])\n  return [...uniqueURLs]\n}\n", "const audioMediaTypes = {\n  mp3: 'audio/mpeg', // MP3 audio format\n  ogg: 'audio/ogg', // OGG audio format\n  wav: 'audio/wav' // WAV audio format\n}\n\nconst imageMediaTypes = {\n  avif: 'image/avif', // AVIF image format\n  bmp: 'image/bmp', // BMP image format\n  gif: 'image/gif', // GIF image format\n  heic: 'image/heic', // HEIC image format\n  heif: 'image/heif', // HEIF image format\n  ico: 'image/x-icon', // ICO image format\n  jp2: 'image/jp2', // JPEG 2000 image format\n  jpeg: 'image/jpeg', // JPEG image format\n  jpg: 'image/jpeg', // JPEG image format (alternative extension)\n  jxr: 'image/vnd.ms-photo', // JPEG XR image format\n  png: 'image/png', // PNG image format\n  svg: 'image/svg+xml', // SVG image format\n  tif: 'image/tiff', // TIFF image format\n  tiff: 'image/tiff', // TIFF image format (alternative extension)\n  webp: 'image/webp' // WebP image format\n}\n\nconst videoMediaTypes = {\n  mp4: 'video/mp4', // MP4 video format\n  ogv: 'video/ogg', // OGG video format\n  webm: 'video/webm' // WebM video format\n}\n\n// TODO: Expand to all media types once proper templates are implemented\nconst mediaTypes = imageMediaTypes\n\nconst tagsWithHrefAttribute = [\n  'animate', // SVG: Animation\n  'animateMotion', // SVG: Animation\n  'animateTransform', // SVG: Animation\n  'area', // HTML: Image map area\n  'audio', // HTML: Audio content\n  'base', // HTML: Base URL\n  'embed', // HTML: Embedded content\n  'feDisplacementMap', // SVG: Filter primitive\n  'feImage', // SVG: Filter primitive\n  'feTile', // SVG: Filter primitive\n  'filter', // SVG: Filter container\n  'font-face-uri', // SVG: Font reference\n  'iframe', // HTML: Inline frame\n  'image', // SVG: Image\n  'link', // HTML: External resources (e.g., stylesheets)\n  'object', // HTML: Embedded content (fallback for non-HTML5 browsers)\n  'script', // HTML: External scripts\n  'source', // HTML: Media source\n  'track', // HTML: Text tracks for media elements\n  'use', // SVG: Reuse shapes from other documents\n  'video' // HTML: Video content\n]\n\nconst tagsWithSrcAttribute = [\n  'audio', // HTML: Audio content\n  'embed', // HTML: Embedded content\n  'iframe', // HTML: Inline frame\n  'img', // HTML: Images\n  'input', // HTML: Input elements with type=\"image\"\n  'script', // HTML: External scripts\n  'source', // HTML: Media source\n  'track', // HTML: Text tracks for media elements\n  'video', // HTML: Video content\n  'frame', // HTML: Deprecated (use iframe instead)\n  'frameset', // HTML: Deprecated (use iframe instead)\n  'object', // HTML: Embedded content\n  'picture', // HTML: Responsive images\n  'use' // SVG: Reuse shapes from other documents\n]\n\nexport const mediaTags = tagsWithHrefAttribute.concat(tagsWithSrcAttribute)\n\nexport function getMediaType(url) {\n  try {\n    url = new URL(url)\n\n    const index = url.pathname.lastIndexOf('.')\n    if (!index) return null\n\n    const extension = url.pathname.substring(index + 1)\n    return mediaTypes[extension]\n  } catch (error) {\n    console.error('Failed to detect media type!', url, error)\n  }\n}\n", "import { extractURLHosts } from './urls'\nimport { getMediaType } from './media'\n\nexport default class Renderer {\n  // Constructs a new Renderer instance\n  //\n  // @param {Controller} controller - a Stimulus Controller instance\n  constructor(controller) {\n    this.controller = controller\n    this.hosts = controller.hostsValue\n\n    // invalid urls template\n    if (controller.invalidTemplateValue) {\n      const template = document.getElementById(controller.invalidTemplateValue)\n      if (template) this.invalidTemplate = template\n    }\n\n    // valid urls template\n    if (controller.validTemplateValue) {\n      const template = document.getElementById(controller.validTemplateValue)\n      if (template) this.validTemplate = template\n    }\n  }\n\n  renderHeader(content) {\n    return `\n    <h1 style=\"background-color:ivory; border:solid 1px red; color:red; padding:5px; display:flex; align-items:center; font-size:1.25rem; line-height:1.5rem;\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" style=\"flex:1; width:1rem; height:1rem;\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3\" />\n      </svg>\n      ${content}\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" style=\"flex:1; width:1rem; height:1rem;\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3\" />\n      </svg>\n    </h1>\n    `\n  }\n\n  // Renders a URL as an HTML embed i.e. an iframe or media tag (img, video, audio etc.)\n  //\n  // @param {String} url - URL\n  // @returns {String} HTML\n  render(url = 'https://example.com') {\n    const element = this.validTemplate.content.firstElementChild.cloneNode(true)\n    const iframe = element.querySelector('iframe')\n    const img = element.querySelector('img')\n\n    if (getMediaType(url)) {\n      iframe.remove()\n      img.src = url\n    } else {\n      img.remove()\n      iframe.src = url\n    }\n    return element.outerHTML\n  }\n\n  // Renders a list of URLs as HTML links i.e. anchor tags <a>\n  //\n  // @param {String[]} urls - list of URLs\n  // @returns {String[]} list of individual HTML links\n  //\n  renderLinks(urls = ['https://example.com', 'https://test.com']) {\n    if (!urls?.length) return\n    return urls.map(url => `<a href='${url}' target='_blank'>${url}</a>`)\n  }\n\n  // Renders a list of URLs as HTML embeds i.e. iframes or media tags (img, video, audio etc.)\n  //\n  // @param {String[]} urls - list of URLs\n  // @returns {String[]} list of individual HTML embeds\n  //\n  renderValid(urls = ['https://example.com', 'https://test.com']) {\n    if (!urls?.length) return\n    return urls.map(url => this.render(url))\n  }\n\n  // Renders a list of URLs as an HTML error block\n  //\n  // @param {String[]} urls - list of URLs\n  // @returns {String} HTML\n  //\n  renderInvalid(urls = ['https://example.com', 'https://test.com']) {\n    if (!urls?.length) return\n    const element = this.invalidTemplate.content.firstElementChild.cloneNode(true)\n    const allowedHostsElement = element.querySelector('[data-list=\"allowed-hosts\"]')\n    const hostsElement = element.querySelector('[data-list=\"hosts\"]')\n\n    if (allowedHostsElement)\n      if (this.hosts.length)\n        allowedHostsElement.innerHTML = this.hosts.map(host => `<li><code>${host}</code></li>`).join('')\n      else\n        allowedHostsElement.innerHTML = `\n          <li>\n            <strong>Allowed hosts not configured yet.</strong>\n          </li>\n        `\n\n    if (hostsElement) {\n      const hosts = extractURLHosts(urls)\n      if (hosts.length) hostsElement.innerHTML = hosts.map(host => `<li><code>${host}</code></li>`).join('')\n      else hostsElement.innerHTML = '<li><code>Media is only supported from allowed hosts.</code></li>'\n    }\n\n    return element.outerHTML\n  }\n\n  // Sets the template for valid URLs\n  //\n  // @param {String} template - the template HTML\n  // @returns {void}\n  //\n  set validTemplate(template) {\n    this._validTemplate = template\n  }\n\n  // Returns the template for valid URLs\n  //\n  // @returns {String} template HTML\n  //\n  get validTemplate() {\n    if (this._validTemplate) return this._validTemplate\n\n    const template = document.createElement('template')\n    template.innerHTML = '<div><iframe></iframe><img></img></div>'\n    return template\n  }\n\n  // Sets the template for invalid URLs\n  //\n  // @param {String} template - the template HTML\n  // @returns {void}\n  //\n  set invalidTemplate(template) {\n    this._invalidTemplate = template\n  }\n\n  // Returns the template for invalid URLs\n  //\n  // @returns {String} template HTML\n  //\n  get invalidTemplate() {\n    if (this._invalidTemplate) return this._invalidTemplate\n\n    const template = document.createElement('template')\n    template.innerHTML = `\n      <div style=\"background-color:ivory; border:solid 1px red; color:red; padding:15px; font-size:1rem;\">\n        <h1 slot=\"header\">Copy / Paste Errors!</h1>\n        <h4>The pasted content includes media from unsupported hosts.</h4>\n        <h2 style=\"color:green;\">Allowed Hosts / Domains</h2>\n        <ul data-list=\"allowed-hosts\" style=\"color:green;\"></ul>\n        <h2>Prohibited Hosts</h2>\n        <ul data-list=\"hosts\"></ul>\n      </div>\n    `\n    return template\n  }\n}\n", "//import Trix from 'trix'\n//import { Controller } from '@hotwired/stimulus'\nimport { extractURLs, validateURL } from './urls'\nimport { getMediaType, mediaTags } from './media'\nimport Renderer from './renderer'\n\n// imports for developing and testing with test/index.html\nimport { Controller } from 'https://unpkg.com/@hotwired/stimulus@3.2.1/dist/stimulus.js'\n\nexport default class extends Controller {\n  static values = {\n    hosts: Array, // list of hosts/domains that embeds are allowed from\n    validTemplate: String, // dom id of template to use for valid embeds\n    invalidTemplate: String // dom id of template to use for invalid embeds\n  }\n\n  connect() {\n    this.setupWeakSecurity()\n  }\n\n  paste(event) {\n    const { html, string, range } = event.paste\n    let content = html || string || ''\n    const pastedTemplate = this.buildPastedTemplate(content)\n    const pastedElement = pastedTemplate.content.firstElementChild\n    const pastedURLs = extractURLs(pastedElement)\n\n    // no URLs were pasted, let Trix handle it ...............................................................\n    if (!pastedURLs.length) return\n\n    event.preventDefault()\n    this.editor.setSelectedRange(range)\n    const renderer = new Renderer(this)\n\n    // Media URLs (images, videos, audio etc.)\n    const mediaURLs = pastedURLs.filter(url => getMediaType(url))\n    Array.from(pastedTemplate.content.firstElementChild.querySelectorAll('iframe')).forEach(frame => {\n      if (!mediaURLs.includes(frame.src)) mediaURLs.push(frame.src)\n    })\n    const validMediaURLs = mediaURLs.filter(url => validateURL(url, this.hostsValue))\n    const validMediaURLContent = renderer.renderValid(validMediaURLs)\n    const invalidMediaURLs = mediaURLs.filter(url => !validMediaURLs.includes(url))\n    const invalidMediaURLContent = renderer.renderInvalid(invalidMediaURLs)\n\n    // Standard URLs (non-media resources i.e. web pages etc.)\n    const standardURLs = pastedURLs.filter(url => !mediaURLs.includes(url))\n    const validStandardURLs = standardURLs.filter(url => validateURL(url, this.hostsValue))\n    const validStandardURLContent = renderer.renderValid(validStandardURLs)\n    const invalidStandardURLs = standardURLs.filter(url => !validStandardURLs.includes(url))\n    const invalidStandardURLContent = renderer.renderLinks(invalidStandardURLs)\n\n    // sanitize the pasted content by removing all media tags\n    const sanitizedPastedElement = pastedElement.cloneNode(true)\n    sanitizedPastedElement.querySelectorAll(mediaTags.join(', ')).forEach(tag => tag.remove())\n    const sanitizedPastedContent = sanitizedPastedElement.innerHTML\n\n    // 1. render invalid media urls\n    this.insert(invalidMediaURLContent, { first: true }).then(() => {\n      // 2. render invalid standard urls\n      this.insert(renderer.renderHeader('Pasted URLs')).then(() => {\n        this.insert(invalidStandardURLContent, { disposition: 'inline' }).then(() => {\n          // 3. render valid media urls\n          this.insert(validMediaURLContent).then(() => {\n            // 4. render valid standard urls\n            this.insert(validStandardURLContent).then(() => {\n              // 5. render the pasted content as sanitized HTML\n              this.insert(renderer.renderHeader('Pasted Content')).then(() => {\n                this.insert(sanitizedPastedContent, { disposition: 'inline' })\n              })\n            })\n          })\n        })\n      })\n    })\n  }\n\n  buildPastedTemplate(content) {\n    const template = document.createElement('template')\n    template.innerHTML = `<div>${content.trim()}</div>`\n    return template\n  }\n\n  insertAttachment(content, options = { delay: 0 }) {\n    const { delay } = options\n    return new Promise(resolve => {\n      setTimeout(() => {\n        const attachment = new Trix.Attachment({ content, contentType: 'application/vnd.trix-embed.html' })\n        this.editor.insertAttachment(attachment)\n        resolve()\n      }, delay)\n    })\n  }\n\n  insertHTML(content, options = { delay: 0 }) {\n    const { delay } = options\n    return new Promise(resolve => {\n      setTimeout(() => {\n        this.editor.insertHTML(content)\n        this.editor.insertLineBreak()\n        resolve()\n      }, delay)\n    })\n  }\n\n  insert(content, options = { delay: 0, disposition: 'attachment', first: false }) {\n    const { delay, disposition, first } = options\n\n    if (content?.length) {\n      return new Promise(resolve => {\n        setTimeout(() => {\n          if (first) this.editor.deleteInDirection('backward')\n\n          if (typeof content === 'string') {\n            if (disposition === 'inline') return this.insertHTML(content, { delay }).then(resolve)\n            else return this.insertAttachment(content, { delay }).then(resolve)\n          }\n\n          if (Array.isArray(content)) {\n            if (disposition === 'inline')\n              return content\n                .reduce((p, c, i) => p.then(this.insertHTML(c, { delay })), Promise.resolve())\n                .then(resolve)\n            else\n              return content\n                .reduce((p, c, i) => p.then(this.insertAttachment(c, { delay })), Promise.resolve())\n                .then(resolve)\n          }\n\n          resolve()\n        })\n      })\n    }\n\n    return Promise.resolve()\n  }\n\n  get editor() {\n    return this.element.editor\n  }\n\n  // =========================================================================================================\n  // Weak security through obscurity and indirection\n  // =========================================================================================================\n\n  setupWeakSecurity() {\n    const idElement = this.element.closest('[id]')\n    const id = idElement ? idElement.id : ''\n\n    this.hostsKey = `trix-embed-hosts-${id}`\n\n    if (this.rememberedHosts) this.hostsValue = this.rememberedHosts\n    this.rememberHosts()\n  }\n\n  rememberHosts() {\n    sessionStorage.setItem(this.hostsKey, JSON.stringify(this.hostsValue))\n  }\n\n  get rememberedHosts() {\n    const json = sessionStorage.getItem(this.hostsKey)\n    if (!json) return null\n    return JSON.parse(json)\n  }\n}\n", "import Controller from './controller'\n\nconst defaultOptions = {\n  application: null\n}\n\nfunction initialize(options = defaultOptions) {\n  const { application } = options\n  application.register('trix-embed', Controller)\n}\n\nexport default { initialize }\n"],
  "mappings": "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",
  "names": ["createURL", "value", "callback", "error", "createURLHost", "url", "extractURLsFromTextNodes", "element", "urls", "walker", "node", "val", "match", "extractURLsFromElements", "el", "validateURL", "allowedHosts", "valid", "host", "allowedHost", "extractURLHosts", "values", "hosts", "extractURLs", "elementURLs", "textNodeURLs", "imageMediaTypes", "mediaTypes", "imageMediaTypes", "tagsWithHrefAttribute", "tagsWithSrcAttribute", "mediaTags", "getMediaType", "url", "index", "extension", "error", "Renderer", "controller", "template", "content", "url", "element", "iframe", "img", "getMediaType", "urls", "allowedHostsElement", "hostsElement", "host", "hosts", "extractURLHosts", "Controller", "controller_default", "Controller", "event", "html", "string", "range", "content", "pastedTemplate", "pastedElement", "pastedURLs", "extractURLs", "renderer", "Renderer", "mediaURLs", "url", "getMediaType", "frame", "validMediaURLs", "validateURL", "validMediaURLContent", "invalidMediaURLs", "invalidMediaURLContent", "standardURLs", "validStandardURLs", "validStandardURLContent", "invalidStandardURLs", "invalidStandardURLContent", "sanitizedPastedElement", "mediaTags", "tag", "sanitizedPastedContent", "template", "options", "delay", "resolve", "attachment", "disposition", "first", "p", "c", "i", "idElement", "id", "json", "__publicField", "defaultOptions", "initialize", "options", "application", "controller_default", "src_default"]
}
